function handleResponsiveness(){var t=$(window).width();if(t<992){var e=$("#navbarResponsive").height();t<770?$("body.fixed-nav").css("padding-top",e+75):$("body.fixed-nav").css("padding-top",e+56)}else $("body.fixed-nav").css("padding-top","56px");$(window).on("resize",function(){if($(this).width()!=t)if((t=$(this).width())<992){var e=$("#navbarResponsive").height();t<770?$("body.fixed-nav").css("padding-top",e+75):$("body.fixed-nav").css("padding-top",e+56)}else $("body.fixed-nav").css("padding-top","56px")})}function checkForHTTPS(){window.location.protocol.includes("https")&&$("#navbarResponsive").prepend("<div class='alert' id='httpsAlert'>You are currently viewing the HTTPS website. Due to security limitations, we are unable to show results from HTTP-only InterMines. You may be able to see more results if you <a href='http://im-browser-prototype.herokuapp.com/'>reload this site</a> via HTTP, and/or allow unsafe scripts to run.</div><br/>")}function initializeStartupConfiguration(){window.imTableConstraint=[[],[],[],[],[]],window.locationFilter=null,window.interactionsFilter=null,window.clinVarFilter=null,window.expressionFilter=null,window.proteinLocalisationFilter=null,window.pieChartObject=null,window.minesConfigs=null,readTextFile("./mine_configs/mines_filters.json",function(e){window.minesConfigs=JSON.parse(e),console.log(window.minesConfigs)}),window.mineUrl="httpCOLONSLASHSLASHwww.humanmine.orgSLASHhumanmineSLASHservice",window.selectedMineName="HumanMine",window.currentClassView="Gene","undefined"!=typeof Storage&&localStorage.getItem("selectedMineName")&&localStorage.getItem("mineUrl")&&(window.mineUrl=localStorage.getItem("mineUrl"),window.selectedMineName=localStorage.getItem("selectedMineName"))}function getColorsArray(e){return["#fbb735","#e98931","#eb403b","#b32E37","#6c2a6a","#5c4399","#274389","#1f5ea8","#227FB0","#2ab0c5","#39c0b3","#b3cae5","#dbdde4","#e4e3e4","#f7ddbb","#efcab2","#bccacc","#c7d8d6","#d9ebe0","#ebf9e3","#f4f8d0","#5e7fb1","#dce8f7","#eff1f4","#fce1a8","#f7ec86","#8fb8ee","#cbe2f4","#dbe5eb","#f9d3b8","#e0b2a3","#a2e0f9","#cef5fc","#eafaeb","#fefcd3","#fdf4ba","#6bafd2","#a4c8dc","#d6cbca","#eabc96","#db8876","#b4ced8","#d7e5d4","#e2e8c9","#f1e5b9","#edd7ac","#29153e","#657489","#bfb6aa","#ead79d","#f2ebda","#20202f","#273550","#416081","#adacb2","#eac3a2","#555351","#555351","#8d7b6c","#cc9d7a","#fff9aa","#171c33","#525f83","#848896","#bb9d78","#f6e183","#ffe3c8","#efad9e","#c79797","#a78a92","#857d8d","#6f749e","#9a8daf","#d0a8b9","#f8bbb1","#fde6b1","#536a97","#8087ad","#bca391","#bd968a","#a38b8a","#325176","#7b9ea7","#9baf93","#dbaf81","#fbdf73","#727288","#8e889b","#d3c2bd","#f9d89a","#f8c785","#506e90","#7695aa","#a7bdb8","#e2e2b8","#fdf998","#634b5f","#868080","#b7b29b","#dfd6a4","#e9f3a2","#7e74b2","#b3a2c2","#e2cdbe","#f6cf97","#f4a77a","#34a4ca","#59d7dd","#a8f2f0","#d0f8ef","#d6f6e1","#7696cd","#8fb2e4","#b0cff0","#d7e5ec","#dee0e7","#8dd6c3","#c5e5e2","#eafaeb","#f9f7ca","#fceea1","#4e72c7","#6d9ed7","#a4c8d5","#b4d9e1","#c4d9d6","#47565f","#5b625a","#947461","#f98056","#f7ec86","#95b3bf","#c6cdd3","#e5d8d9","#f1e1d9","#f3e1cd","#4c86ab","#95a5bc","#bfcdc9","#dcd6c9","#edd9c7","#0f124a","#1b2360","#515b80","#758391","#e5e3b0","#889db6","#a5b8ce","#c1cfdd","#dee1e4","#d5d1cf","#74bddb","#a8d1eb","#cddbf5","#e4e6fb","#f6f4f8","#a7d3cb","#bcc1c4","#e5cab3","#fee6c5","#fdecd0","#325571","#8e9fa4","#decab2","#f2d580","#ffa642","#c5d4d7","#d6b98d","#c99262","#8c5962","#43577e"]}function getIntermines(){return $.ajax({url:"http://registry.intermine.org/service/instances?mines=%27prod%27",type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getOntologyTermsInClass(){return $.ajax({url:"/fetch/ontologyterms/"+window.mineUrl+"/"+window.currentClassView,type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getAllelesClinicalSignifanceInClass(){return $.ajax({url:"/fetch/clinicalsignificance/"+window.mineUrl+"/"+window.currentClassView,type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getProteinAtlasExpressionCellTypesInClass(){return $.ajax({url:"/fetch/proteinatlascelltypes/"+window.mineUrl+"/"+window.currentClassView,type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getProteinAtlasExpressionTissueNamesInClass(){return $.ajax({url:"/fetch/proteinatlastissuenames/"+window.mineUrl+"/"+window.currentClassView,type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getAllelesTypesInClass(){return $.ajax({url:"/fetch/allelestype/"+window.mineUrl+"/"+window.currentClassView,type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getDatasetNamesInClass(){return $.ajax({url:"/fetch/datasets/"+window.mineUrl+"/"+window.currentClassView,type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getPathwayNamesInClass(){return $.ajax({url:"/fetch/pathways/"+window.mineUrl+"/"+window.currentClassView,type:"GET",error:function(e){console.log("Error")},success:function(e){}})}function getDiseasesNamesInClass(){return $.ajax({url:"/fetch/diseases/"+window.mineUrl+"/"+window.currentClassView,type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getProteinDomainNamesInClass(){return $.ajax({url:"/fetch/proteindomainname/"+window.mineUrl,type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getParticipant2SymbolsInClass(){return $.ajax({url:"/fetch/participant2genesymbols/"+window.mineUrl,type:"GET",error:function(e){console.log(e)},success:function(e){}})}function getItemsInClass(e){return $.ajax({url:"/statistics/count/items/"+window.mineUrl+"/"+window.currentClassView,type:"POST",data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json",error:function(e){console.log(e)},success:function(e){}})}function flatten(e){return e.reduce(function(e,t){return e.concat(Array.isArray(t)?flatten(t):t)},[])}function updateTableWithConstraints(){for(;0<window.imTable.query.constraints.length;)try{window.imTable.query.removeConstraint(window.imTable.query.constraints[0])}catch(e){continue}0<window.imTableConstraint[0].length&&("Gene"==window.currentClassView?window.imTable.query.addConstraint({path:"goAnnotation.ontologyTerm.name",op:"ONE OF",values:window.imTableConstraint[0]}):window.imTable.query.addConstraint({path:"ontologyAnnotations.ontologyTerm.name",op:"ONE OF",values:window.imTableConstraint[0]})),0<window.imTableConstraint[1].length&&window.imTable.query.addConstraint({path:"dataSets.name",op:"ONE OF",values:window.imTableConstraint[1]}),0<window.imTableConstraint[2].length&&window.imTable.query.addConstraint({path:"pathways.name",op:"ONE OF",values:window.imTableConstraint[2]}),0<window.imTableConstraint[3].length&&("Gene"==window.currentClassView?window.imTable.query.addConstraint({path:"proteins.proteinDomainRegions.proteinDomain.name",op:"ONE OF",values:window.imTableConstraint[3]}):window.imTable.query.addConstraint({path:"proteinDomainRegions.proteinDomain.name",op:"ONE OF",values:window.imTableConstraint[3]})),0<window.imTableConstraint[4].length&&window.imTable.query.addConstraint({path:"diseases.name",op:"ONE OF",values:window.imTableConstraint[4]})}function remove(e,t){for(var a=e.indexOf(t);-1!==a;)e.splice(a,1),a=e.indexOf(t)}function showMoreDatasetNames(){$.when(getDatasetNamesInClass()).done(function(e){for(var t=[],a=0;a<e.results.length;a++)if(null!=e.results[a].item){if("KEGG pathways data set"==e.results[a].item||"HGNC identifiers"==e.results[a].item||"BioGRID interaction data set"==e.results[a].item||"IntAct interactions data set"==e.results[a].item||"ClinVar data set"==e.results[a].item||"OMIM diseases"==e.results[a].item)continue;t.push({label:e.results[a].item+" ("+e.results[a].count+")",value:e.results[a].item})}var n=[];for(a=0;a<t.length;a++)n.push(t[a].value);if(n.sort(),!(n.length<4)){var i=(n=n.slice(3)).length;for(a=0;a<i;a++){var o=n[a];$("#datasetsSelector").append('<div class="form-check" style="margin-left: 10px;"><input class="form-check-input" type="checkbox" id="'+o.replace(/[^a-zA-Z0-9]/g,"")+'" value="'+o+'"><label class="form-check-label" for="'+o+'"><p>'+o+"</p></label></div>"),$("#"+o.replace(/[^a-zA-Z0-9]/g,"")).change(function(){if($(this).is(":checked")){var e=$(this).val();window.imTableConstraint[1].push(e),updateTableWithConstraints()}else{e=$(this).val();remove(window.imTableConstraint[1],e),updateTableWithConstraints()}})}}})}function readTextFile(e,t){var a=new XMLHttpRequest;a.overrideMimeType("application/json"),a.open("GET",e,!0),a.onreadystatechange=function(){4===a.readyState&&"200"==a.status&&t(a.responseText)},a.send(null)}function clearExtraFilters(){$("#locationFilterLi").remove(),$("#diseasesFilterLi").remove(),$("#clinvarFilterLi").remove(),$("#proteinLocalisationFilterLi").remove(),$("#proteinDomainFilterLi").remove(),$("#interactionsFilterLi").remove(),$("#expressionFilterLi").remove(),$("#datasetFilterLi").remove(),window.extraFiltersAdded=!1}function addExtraFilters(){if(!window.extraFiltersAdded){var e=window.minesConfigs[window.selectedMineName].extra_filters;e.includes("location")&&$("#sidebarUl").append('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="Location" id="locationFilterLi"><a class="nav-link" data-toggle="collapse" href="#locationSearchCardBlock" aria-controls="locationSearchCardBlock" style="color:black;"><i class="fa fa-fw fa-location-arrow"></i><span class="nav-link-text"></span>Location</a>    <div class="card" style="width: 100%;">        <div class="collapse card-block" id="locationSearchCardBlock" style="overflow-y: auto; overflow-x:hidden;">            <div class="ul list-group list-group-flush" id="locationFilterList"></div>            <form-group class="ui-front">                <div class="row" style="align: center;"><input class="form-control" type="text" id="locationChromosomeSearchInput" placeholder="Chromosome (e.g. 12)" style="width: 100%; float:left; margin-left: 15px;" /></div>                <div class="row" style="align: center;"><input class="form-control" type="text" id="locationStartSearchInput" placeholder="Start" style="width: 45%; float:left; margin-left: 15px;" /><input class="form-control" type="text" id="locationEndSearchInput" placeholder="End" style="width: 45%;"                    /></div><button class="btn btn-success" type="button" style="width:100%;" id="locationSearchButton">Go!</button><button class="btn btn-danger" type="button" style="width:100%;" id="locationResetButton">Reset</button></form-group>        </div>    </div></li>'),e.includes("expression")&&$("#sidebarUl").append('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="Expression" id="expressionFilterLi"><a class="nav-link" data-toggle="collapse" href="#expressionSearchCardBlock" aria-controls="expressionSearchCardBlock" style="color:black;"><i class="fa fa-fw fa-tasks"></i><span class="nav-link-text"></span>Expression</a><div class="card" style="width: 100%;"><div class="collapse card-block" id="expressionSearchCardBlock" style="overflow-y: auto; overflow-x:hidden;"><div class="ul list-group list-group-flush" id="expressionFilterList"></div><form-group class="ui-front"><div class="row" style="align: center;"><select class="form-control" id="expressionExpressionSelector" style="width: 45%; float:left; margin-left: 15px;"><option value="UP">UP</option><option value="DOWN">DOWN</option><option value="NONDE">NONDE</option></select><select class="form-control" id="expressionDatasetSelector" style="width: 45%;"><option value="All">All (Set)</option><option value="ArrayExpress accession: E-MTAB-62">E-MTAB-62</option><option value="E-MTAB-513 illumina body map">Illumina bodymap</option></select></div><div class="row" style="align: center;"><input class="form-control" type="text" id="expressionPvalueSearchInput" placeholder="P-value (Opt)" style="width: 45%; float:left; margin-left: 15px;"/><input class="form-control" type="text" id="expressionTstatisticSearchInput" placeholder="T-statistic (Opt)" style="width: 45%;"/></div><button class="btn btn-success" type="button" style="width:100%;" id="expressionSearchButton">Go!</button><button class="btn btn-danger" type="button" style="width:100%;" id="expressionResetButton">Reset</button></form-group></div></div></li>'),e.includes("interactions")&&($("#sidebarUl").append('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="Interactions" id="interactionsFilterLi"><a class="nav-link" data-toggle="collapse" href="#interactionsSearchCardBlock" aria-controls="interactionsSearchCardBlock" style="color:black;"><i class="fa fa-fw fa-podcast"></i><span class="nav-link-text"></span>Interactions</a><div class="card" style="width: 100%;"><div class="collapse card-block" id="interactionsSearchCardBlock" style="overflow-y: auto; overflow-x:hidden;"><div class="ul list-group list-group-flush" id="interactionsFilterList"></div><form-group class="ui-front"><div class="row" style="align: center;"><input class="form-control" type="text" id="interactionsParticipant2SearchInput" placeholder="Optional: Participant 2 (symbol)" style="width: 100%; float:left; margin-left: 15px;"/></div><div class="row" style="align: center;"><select class="form-control" id="interactionsTypeSelector" style="width: 45%; float:left; margin-left: 15px;"><option value="All">All (Type)</option><option value="physical">Physical</option><option value="genetic">Genetic</option></select><select class="form-control" id="interactionsDatasetSelector" style="width: 45%;"><option value="All">All (Set)</option><option value="BioGRID interaction data set">BioGRID</option><option value="IntAct interactions data set">IntAct</option></select></div><button class="btn btn-success" type="button" style="width:100%;" id="interactionsSearchButton">Go!</button><button class="btn btn-danger" type="button" style="width:100%;" id="interactionsResetButton">Reset</button></form-group></div></div></li>'),$.when(getParticipant2SymbolsInClass()).done(function(e){for(var a=[],t=0;t<e.results.length;t++)null!=e.results[t].item&&a.push({label:e.results[t].item+" ("+e.results[t].count+")",value:e.results[t].item});$("#interactionsParticipant2SearchInput").autocomplete({minLength:3,source:function(e,t){t($.ui.autocomplete.filter(a,e.term).slice(0,15))},select:function(e,t){e.preventDefault(),$("#interactionsParticipant2SearchInput").val(t.item.value)},focus:function(e,t){e.preventDefault(),$("#interactionsParticipant2SearchInput").val(t.item.value)}})})),e.includes("diseases")&&($("#sidebarUl").append('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="Diseases (OMIM)" id="diseasesFilterLi"><a class="nav-link" data-toggle="collapse" href="#diseasesSearchCardBlock" aria-controls="diseasesSearchCardBlock" style="color:black;"><i class="fa fa-fw fa-certificate"></i><span class="nav-link-text"></span>Diseases (OMIM)</a><div class="card" style="width: 100%;"><div class="collapse card-block" id="diseasesSearchCardBlock" style="overflow: auto;"><div class="ul list-group list-group-flush" id="diseasesFilterList"></div><form-group class="ui-front"><input class="form-control" type="text" id="diseasesSearchInput" placeholder="e.g. alzheimer disease"/></form-group></div></div></li>'),$.when(getDiseasesNamesInClass()).done(function(e){for(var a=[],t=0;t<e.results.length;t++)null!=e.results[t].item&&a.push({label:e.results[t].item+" ("+e.results[t].count+")",value:e.results[t].item});$("#diseasesSearchInput").autocomplete({minLength:3,source:function(e,t){t($.ui.autocomplete.filter(a,e.term).slice(0,15))},select:function(e,t){e.preventDefault(),$("#diseasesSearchInput").val(t.item.value),window.imTableConstraint[4].push(t.item.value),updateTableWithConstraints();var a=t.item.value.replace(/[^a-zA-Z0-9]/g,"")+"button";$("#diseasesFilterList").append('<div class="input-group" id="'+t.item.value.replace(/[^a-zA-Z0-9]/g,"")+'"><label class="form-control">'+t.item.value.slice(0,22)+'</label><span class="input-group-btn"><button class="btn btn-sm" type="button" id="'+a+'" style="height: 100%;">x</button></span></div>'),$("#"+a).click(function(){remove(window.imTableConstraint[4],t.item.value),updateTableWithConstraints(),$("#"+t.item.value.replace(/[^a-zA-Z0-9]/g,"")).remove()})},focus:function(e,t){e.preventDefault(),$("#diseasesSearchInput").val(t.item.value)}})})),e.includes("clinvar")&&($("#sidebarUl").append('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="ClinVar" id="clinvarFilterLi"><a class="nav-link" data-toggle="collapse" href="#clinvarSearchCardBlock" aria-controls="clinvarSearchCardBlock" style="color:black;"><i class="fa fa-fw fa-eyedropper"></i><span class="nav-link-text"></span>ClinVar</a><div class="card" style="width: 100%;"><div class="collapse card-block" id="clinvarSearchCardBlock" style="overflow-y: auto; overflow-x:hidden;"><form-group class="ui-front"><div style="align: center;"><input class="form-control" type="text" id="clinvarClinicalSignificanceSearchInput" placeholder="Significance (e.g. Pathogenic)" style="width: 100%;"/><input class="form-control" type="text" id="clinvarTypeSearchInput" placeholder="Type (e.g. insertion)" style="width: 100%;"/></div><button class="btn btn-success" type="button" style="width:100%;" id="clinvarSearchButton">Go!</button><button class="btn btn-danger" type="button" style="width:100%;" id="clinvarResetButton">Reset</button></form-group></div></div></li>'),$.when(getAllelesClinicalSignifanceInClass()).done(function(e){for(var a=[],t=0;t<e.results.length;t++)null!=e.results[t].item&&a.push({label:e.results[t].item+" ("+e.results[t].count+")",value:e.results[t].item});$("#clinvarClinicalSignificanceSearchInput").autocomplete({minLength:2,source:function(e,t){t($.ui.autocomplete.filter(a,e.term).slice(0,15))},select:function(e,t){e.preventDefault(),$("#clinvarClinicalSignificanceSearchInput").val(t.item.value)},focus:function(e,t){e.preventDefault(),$("#clinvarClinicalSignificanceSearchInput").val(t.item.value)}})}),$.when(getAllelesTypesInClass()).done(function(e){for(var a=[],t=0;t<e.results.length;t++)null!=e.results[t].item&&a.push({label:e.results[t].item+" ("+e.results[t].count+")",value:e.results[t].item});$("#clinvarTypeSearchInput").autocomplete({minLength:2,source:function(e,t){t($.ui.autocomplete.filter(a,e.term).slice(0,15))},select:function(e,t){e.preventDefault(),$("#clinvarTypeSearchInput").val(t.item.value)},focus:function(e,t){e.preventDefault(),$("#clinvarTypeSearchInput").val(t.item.value)}})})),e.includes("protein-localisation")&&($("#sidebarUl").append('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="Protein Localisation" id="proteinLocalisationFilterLi"><a class="nav-link" data-toggle="collapse" href="#proteinLocalisationSearchCardBlock" aria-controls="proteinLocalisationSearchCardBlock" style="color:black;"><i class="fa fa-fw fa-trello"></i><span class="nav-link-text"></span>Protein Localisation</a><div class="card" style="width: 100%;"><div class="collapse card-block" id="proteinLocalisationSearchCardBlock" style="overflow-y: auto; overflow-x:hidden;"><div class="ul list-group list-group-flush" id="proteinLocalisationFilterList"></div><form-group class="ui-front"><div class="row"><input class="form-control" type="text" id="proteinLocalisationCellTypeSearchInput" placeholder="Cell type (e.g. adipocytes)" style="width: 100%; margin-left: 15px;"/></div><div class="row" style="align: center;"><select class="form-control" id="proteinLocalisationExpressionTypeSelector" style="width: 45%; float:left; margin-left: 15px;"><option value="All">All (Type)</option><option value="APE - two or more antibodies">Two or more antibodies</option><option value="Staining - one antibody only">One antibody only</option></select><select class="form-control" id="proteinLocalisationLevelSelector" style="width: 45%;"><option value="All">All (Level)</option><option value="Low">Low</option><option value="Medium">Medium</option><option value="High">High</option><option value="Not detected">Not detected</option></select></div><div class="row" style="align: center;"><input class="form-control" type="text" id="proteinLocalisationTissueSearchInput" placeholder="Tissue" style="width: 45%; float:left; margin-left: 15px;"/><select class="form-control" id="proteinLocalisationRealibilitySelector" style="width: 45%;"><option value="All">All (Realibility)</option><option value="Low">Low</option><option value="Uncertain">Uncertain</option><option value="Supportive">Supportive</option><option value="High">High</option></select></div><button class="btn btn-success" type="button" style="width:100%;" id="proteinLocalisationSearchButton">Go!</button><button class="btn btn-danger" type="button" style="width:100%;" id="proteinLocalisationResetButton">Reset</button></form-group></div></div></li>'),$.when(getProteinAtlasExpressionCellTypesInClass()).done(function(e){for(var a=[],t=0;t<e.results.length;t++)null!=e.results[t].item&&a.push({label:e.results[t].item+" ("+e.results[t].count+")",value:e.results[t].item});$("#proteinLocalisationCellTypeSearchInput").autocomplete({minLength:2,source:function(e,t){t($.ui.autocomplete.filter(a,e.term).slice(0,15))},select:function(e,t){e.preventDefault(),$("#proteinLocalisationCellTypeSearchInput").val(t.item.value)},focus:function(e,t){e.preventDefault(),$("#proteinLocalisationCellTypeSearchInput").val(t.item.value)}})}),$.when(getProteinAtlasExpressionTissueNamesInClass()).done(function(e){for(var a=[],t=0;t<e.results.length;t++)null!=e.results[t].item&&a.push({label:e.results[t].item+" ("+e.results[t].count+")",value:e.results[t].item});$("#proteinLocalisationTissueSearchInput").autocomplete({minLength:2,source:function(e,t){t($.ui.autocomplete.filter(a,e.term).slice(0,15))},select:function(e,t){e.preventDefault(),$("#proteinLocalisationTissueSearchInput").val(t.item.value)},focus:function(e,t){e.preventDefault(),$("#proteinLocalisationTissueSearchInput").val(t.item.value)}})})),e.includes("protein-domain")&&($("#sidebarUl").append('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="Protein Domain Name" id="proteinDomainFilterLi"><a class="nav-link" data-toggle="collapse" href="#proteinDomainNameSearchCardBlock" aria-controls="proteinDomainNameSearchCardBlock" style="color:black;"><i class="fa fa-fw fa-product-hunt"></i><span class="nav-link-text"></span>Protein Domain Name</a><div class="card" style="width: 100%;"><div class="collapse card-block" id="proteinDomainNameSearchCardBlock" style="overflow: auto;"><div class="ul list-group list-group-flush" id="proteinDomainNameFilterList"></div><form-group class="ui-front"><input class="form-control" type="text" id="proteinDomainNameSearchInput" placeholder="e.g. immunoglobulin subtype"/></form-group></div></div></li>'),$.when(getProteinDomainNamesInClass()).done(function(e){for(var a=[],t=0;t<e.results.length;t++)null!=e.results[t].item&&a.push({label:e.results[t].item+" ("+e.results[t].count+")",value:e.results[t].item});$("#proteinDomainNameSearchInput").autocomplete({minLength:3,source:function(e,t){t($.ui.autocomplete.filter(a,e.term).slice(0,15))},select:function(e,t){e.preventDefault(),$("#proteinDomainNameSearchInput").val(t.item.value),window.imTableConstraint[3].push(t.item.value),updateTableWithConstraints();var a=t.item.value.replace(/[^a-zA-Z0-9]/g,"")+"button";$("#proteinDomainNameFilterList").append('<div class="input-group" id="'+t.item.value.replace(/[^a-zA-Z0-9]/g,"")+'"><label class="form-control">'+t.item.value.slice(0,22)+'</label><span class="input-group-btn"><button class="btn btn-sm" type="button" id="'+a+'" style="height: 100%;">x</button></span></div>'),$("#"+a).click(function(){remove(window.imTableConstraint[3],t.item.value),updateTableWithConstraints(),$("#"+t.item.value.replace(/[^a-zA-Z0-9]/g,"")).remove()})},focus:function(e,t){e.preventDefault(),$("#proteinDomainNameSearchInput").val(t.item.value)}})})),createDatasetFilter(),window.extraFiltersAdded=!0}}function displayItemsInClass(e){$("#organismshortnamelist").parent().find("li").remove();for(var t=[],a=[],n=getColorsArray(e[0].response.results.length),i=0;i<e[0].response.results.length;i++)t.push(e[0].response.results[i].count),a.push(e[0].response.results[i].item);var o=e[0].response.results.length;5<o&&(o=5);for(i=0;i<o;i++){var l=e[0].response.results[i].item,s="("+e[0].response.results[i].count+")";$("#organismshortnamelist").append('<li class="list-group-item" style="border-width: 2px; border-style: solid; border-color: '+n[i]+';"><a class="nav-link" href="#" style="color:black; text-align:center;"><p class="float-md-left">'+l+'</p><p class="float-md-right">'+s+"</p></a></li>")}}function formatMineURL(e){return e.replace(/:/g,"COLON").replace(/\//g,"SLASH")}function escapeMineURL(e){return e.replace(/COLON/g,":").replace(/SLASH/g,"/")}function updatePieChart(e,t){window.pieChartObject&&window.pieChartObject.destroy();for(var a=document.getElementById(t),n=[],i=[],o=getColorsArray(e[0].response.results.length),l=0;l<e[0].response.results.length;l++)n.push(e[0].response.results[l].count),i.push(e[0].response.results[l].item+" ("+e[0].response.results[l].count+")");var s={responsive:!0,maintainAspectRatio:!1,elements:{center:{text:"90%",color:"#FF6384",fontStyle:"Arial",sidePadding:20}},legend:{display:!0,position:"top",onClick:function(e){e.stopPropagation()}},hover:{mode:"nearest",intersect:!0},tooltips:{callbacks:{label:function(e,t){return t.labels[e.index]}},custom:function(e){e.opacity||(document.getElementById(t).style.cursor="default")}},onClick:function(e,t){if(t.length){var a=t[0]._index;selectedSegment=window.pieChartObject.data.labels[a].split("(")[0].trim(),window.imTable.query.addConstraint({path:"organism.shortName",op:"==",value:selectedSegment})}window.pieChartObject.update()}};window.pieChartObject=new Chart(a,{type:"pie",data:{labels:i,datasets:[{data:n,backgroundColor:o}]},options:s})}function createGoAnnotationFilter(){try{$.when(getOntologyTermsInClass()).done(function(e){for(var a=[],t=0;t<e.results.length;t++)null!=e.results[t].item&&a.push({label:e.results[t].item+" ("+e.results[t].count+")",value:e.results[t].item});$("#goAnnotationSearchInput").autocomplete({minLength:3,source:function(e,t){t($.ui.autocomplete.filter(a,e.term).slice(0,15))},updater:function(e){return e},select:function(e,t){e.preventDefault(),$("#goAnnotationSearchInput").val(t.item.value),window.imTableConstraint[0].push(t.item.value),updateTableWithConstraints();var a=t.item.value.replace(/[^a-zA-Z0-9]/g,"")+"button";$("#goAnnotationFilterList").append('<div class="input-group" id="'+t.item.value.replace(/[^a-zA-Z0-9]/g,"")+'"><label class="form-control">'+t.item.value.slice(0,22)+'</label><span class="input-group-btn"><button class="btn btn-sm" type="button" id="'+a+'" style="height: 100%;">x</button></span></div>'),$("#"+a).click(function(){remove(window.imTableConstraint[0],t.item.value),updateTableWithConstraints(),$("#"+t.item.value.replace(/[^a-zA-Z0-9]/g,"")).remove()})},focus:function(e,t){e.preventDefault(),$("#goAnnotationSearchInput").val(t.item.value)}})})}catch(e){$("#goAnnotationFilterLi").remove(),console.log(e)}}function createDatasetFilter(){try{0==$("#datasetFilterLi").length&&$("#sidebarUl").append('<li class="nav-item" data-toggle="tooltip" data-placement="right" title="Dataset Name" id="datasetFilterLi"><a class="nav-link" data-toggle="collapse" href="#datasetNameSearchCardBlock" aria-controls="datasetNameSearchCardBlock" style="color:black;"><i class="fa fa-fw fa-database"></i><span class="nav-link-text"></span>Dataset Name</a><div class="card" style="width: 100%;">        <div class="collapse card-block" id="datasetNameSearchCardBlock" style="overflow-y: auto; overflow-x:hidden;">            <form-group class="ui-front">                <div id="datasetsSelector"></div>            </form-group><button class="btn btn-block btn-warning" id="btnDatasetViewMore" type="button">View more</button></div>    </div></li>'),$.when(getDatasetNamesInClass()).done(function(e){if(!window.datasetNamesLoaded){for(var t=[],a=0;a<e.results.length;a++)if(null!=e.results[a].item){if("KEGG pathways data set"==e.results[a].item||"HGNC identifiers"==e.results[a].item||"BioGRID interaction data set"==e.results[a].item||"IntAct interactions data set"==e.results[a].item||"ClinVar data set"==e.results[a].item||"OMIM diseases"==e.results[a].item)continue;t.push({label:e.results[a].item+" ("+e.results[a].count+")",value:e.results[a].item})}$("#datasetsSelector").empty();var n=e.results.length,i=[];for(a=0;a<t.length;a++)i.push(t[a].value);i.sort(),3<n&&(n=3);for(a=0;a<n;a++){var o=i[a];$("#datasetsSelector").append('<div class="form-check" style="margin-left: 10px;"><input class="form-check-input" type="checkbox" id="'+o.replace(/[^a-zA-Z0-9]/g,"")+'" value="'+o+'"><label class="form-check-label" for="'+o+'"><p>'+o+"</p></label></div>"),$("#"+o.replace(/[^a-zA-Z0-9]/g,"")).change(function(){if($(this).is(":checked")){var e=$(this).val();window.imTableConstraint[1].push(e),updateTableWithConstraints()}else{e=$(this).val();remove(window.imTableConstraint[1],e),updateTableWithConstraints()}})}window.datasetNamesLoaded=!0}})}catch(e){$("#datasetFilterLi").remove(),console.log(e)}}function createPathwaysNameFilter(){try{$.when(getPathwayNamesInClass()).done(function(e){for(var a=[],t=0;t<e.results.length;t++)null!=e.results[t].item&&a.push({label:e.results[t].item+" ("+e.results[t].count+")",value:e.results[t].item});$("#pathwayNameSearchInput").autocomplete({minLength:3,source:function(e,t){t($.ui.autocomplete.filter(a,e.term).slice(0,15))},select:function(e,t){e.preventDefault(),$("#pathwayNameSearchInput").val(t.item.value),window.imTableConstraint[2].push(t.item.value),updateTableWithConstraints();var a=t.item.value.replace(/[^a-zA-Z0-9]/g,"")+"button";$("#pathwayFilterList").append('<div class="input-group" id="'+t.item.value.replace(/[^a-zA-Z0-9]/g,"")+'"><label class="form-control">'+t.item.value.slice(0,22)+'</label><span class="input-group-btn"><button class="btn btn-sm" type="button" id="'+a+'" style="height: 100%;">x</button></span></div>'),$("#"+a).click(function(){remove(window.imTableConstraint[2],t.item.value),updateTableWithConstraints(),$("#"+t.item.value.replace(/[^a-zA-Z0-9]/g,"")).remove()})},focus:function(e,t){e.preventDefault(),$("#pathwayNameSearchInput").val(t.item.value)}})})}catch(e){$("#pathwayNameFilterLi").remove(),console.log(e)}}function addDefaultFilters(){createPathwaysNameFilter(),createGoAnnotationFilter()}function fillMineSelector(){if(0==$("#mineSelector option").length){var n=new URL(window.location.href);$.when(getIntermines()).done(function(e){$("#mineSelector").find("option").remove().end().append('<option value="httpCOLONSLASHSLASHwww.humanmine.orgSLASHhumanmineSLASHservice">HumanMine</option>').val("httpCOLONSLASHSLASHwww.humanmine.orgSLASHhumanmineSLASHservice");for(var t=0;t<e.instances.length;t++)if("HumanMine"!=e.instances[t].name&&!e.instances[t].url.startsWith("https")&&"GrapeMine"!=e.instances[t].name&&"RepetDB"!=e.instances[t].name&&"Wheat3BMine"!=e.instances[t].name&&"WormMine"!=e.instances[t].name&&"XenMine"!=e.instances[t].name&&"PlanMine"!=e.instances[t].name&&"ModMine"!=e.instances[t].name&&"MitoMiner"!=e.instances[t].name){var a=e.instances[t].url;"/"==a[a.length-1]?a+="service":a+="/service",a=formatMineURL(a),$("#mineSelector").append('<option value="'+a+'">'+e.instances[t].name+"</option>").val(a),n.searchParams.get("givenMine")&&e.instances[t].name==n.searchParams.get("givenMine")&&(window.mineUrl=a,window.selectedMineName=e.instances[t].name,document.title=window.currentClassView+" in "+window.selectedMineName,clearExtraFilters(),updateElements(window.imTable.history.currentQuery.constraints,"PieChart"))}$("#mineSelector option").filter(function(){return $(this).text()==window.selectedMineName}).prop("selected",!0),$("#mineSelector").change(function(a){var n=!0,i=$("#mineSelector option:selected").text(),e=$(this).val();if($.ajax({url:escapeMineURL(e),data:{},async:!1,error:function(e,t){if(500<=e.status&&e.status<=511||400<=e.status&&e.status<=431)return 0==$("#unavailableMineAlert").length?($("#navbarResponsive").prepend("<div class='alert' id='unavailableMineAlert'><span class='closebtn' id='closeUnavailableMineAlert'>Ã—</span>Sorry, it looks like the "+i+" server is having problems right now. You can try coming back later, or try browsing a different mine using the mine selector in the top-left corner.</div><br/>"),$("#closeUnavailableMineAlert").click(function(){$("#unavailableMineAlert").hide()})):$("#unavailableMineAlert").show(),n=!1,a.preventDefault(),a.stopPropagation(),a.stopImmediatePropagation(),!1}}),n){window.mineUrl=e,window.selectedMineName=i,document.title=window.currentClassView+" in "+window.selectedMineName,window.datasetNamesLoaded=!1,window.extraFiltersAdded=!1,"undefined"!=typeof Storage&&(localStorage.setItem("mineUrl",window.mineUrl),localStorage.setItem("selectedMineName",window.selectedMineName)),clearExtraFilters(),updateElements(window.imTable.history.currentQuery.constraints,"PieChart");var t={root:escapeMineURL(window.mineUrl)},o={select:["*"],from:window.currentClassView};imtables.configure({TableCell:{PreviewTrigger:"click"}}),imtables.configure("TableResults.CacheFactor",20);imtables.loadTable("#dataTable",{start:0,size:25},{service:t,query:o}).then(function(t){t.on("rendered",function(e){console.log("Rendered table"),console.log(e),updateElements(t.history.currentQuery.constraints,"PieChart")}),window.imTable=t},function(e){console.error("Could not load table",e)})}}),$("#mineSelector").trigger("change")})}}function handleExtraFilters(){window.extraFiltersAdded||(window.minesConfigs[window.selectedMineName]?(addExtraFilters(),window.extraFiltersAdded=!0):createDatasetFilter())}function updateElements(e,t){fillMineSelector(),addDefaultFilters(),handleExtraFilters(),$.when(getItemsInClass(e)).done(function(e){displayItemsInClass(e),createSidebarEvents(),updatePieChart(e,t)})}$(document).ready(function(){checkForHTTPS(),initializeStartupConfiguration(),handleResponsiveness()});